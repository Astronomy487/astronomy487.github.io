<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="icon.png">
  <title>chess sandbox</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap');
    
    @font-face {
      font-family: "chess font";
      src: url('CASEFONT.TTF') format('truetype');
    }
    
    :root {
      --black: #292929;
      --white: #EDEDEA;
      --green: #32684B;
      --orange: #E08300;
    }
    
    body {
      user-select: none;
      margin: 0;
      background-color: var(--black);
      font-family: Inter, sans-serif;
      color: var(--white);
      overflow-x: hidden;
    }
    
    main {
      max-height: 94vh;
      overflow-y: scroll;
      margin-top: 3vh;
      position: absolute;
      width: 100%;
      top: 50%;
      transform: translateY(-50%) translateY(-3vh);
    }
    
    table {
      border-collapse: collapse;
      transition: transform 1s;
      margin: auto;
      font-family: 'chess font';
    }
    
    #display_table {
    }
    
    td {
      width: 5rem;
      height: 5rem;
      text-align: center;
      font-size: 4rem;
      background-color: var(--square);
    }
    
    td[parity="0"] {--square: var(--white); --not-square: var(--green);}
    td[parity="1"] {--square: var(--green); --not-square: var(--white);}
    
    span[team] {
      paint-order: stroke fill;
      -webkit-text-stroke: 0.5rem var(--black);
      display: block;
      transition: transform 0s;
    }
    
    span[team="0"] {color: var(--white);}
    span[team="1"] {color: var(--black); -webkit-text-stroke-color: var(--white);}
    span[team="2"] {color: #3B4FE7;}
    span[team="3"] {color: #EE2B1A;}
    span[team="4"] {color: #ECAD19;}
    
    td[oob="true"] {
      opacity: 0;
    }
    
    td[highlight="owned"] {
      cursor: pointer;
    }
    td[highlight="origin"] {
      background-color: var(--orange);
      cursor: pointer;
    }
    td[highlight="destination"] {
      cursor: pointer;
      box-shadow: inset 0.25rem 0.25rem var(--square), inset -0.25rem -0.25rem var(--square), inset 0.5rem 0.5rem var(--orange), inset -0.5rem -0.5rem var(--orange);
    }
    
    #menu {
      background-color: var(--green);
      width: 100vw;
      min-height: 100vh;
      padding: 6rem 0;
    }
    
    #menu h1 {
      width: 24rem;
      margin: 1rem auto;
      margin-top: 6rem;
      text-align: center;
      font-weight: normal;
      font-size: 1.5rem;
      text-transform: uppercase;
      color: var(--orange);
    }
    
    .setup {
      width: 32rem;
      padding: 0 2rem;
      margin: 1rem auto;
      cursor: pointer;
      border-right: solid 0.125rem var(--white);
    }
    
    .setup:hover {
      --white: var(--orange);
    }
    
    .setup h2 {
      margin-top: 0;
      margin-bottom: 0;
      font-size: 2rem;
      line-height: 4rem;
      font-weight: normal;
    }
    
    .setup h2 span {
      font-family: "chess font";
      paint-order: stroke fill;
      -webkit-text-stroke: 0.5rem var(--black);
      font-size: 4rem;
      transform: translateY(1rem);
      display: inline-block;
      margin-right: 1rem;
      color: var(--white);
    }
    
    .setup p {
      width: 25rem;
      margin: 0.5rem 0;
      margin-left: 5.125rem;
      padding-bottom: 0.5rem;
    }
    
    #sidebar {
      position: fixed;
      width: 16rem;
      bottom: 0;
      left: 0;
      padding: 1rem;
      background-color: var(--black);
      font-size: 1rem;
    }
    
    #sidebar p {
      margin: 0;
      margin-top: 0.5rem;
    }
    
    #sidebar a {
      color: var(--orange);
      text-decoration: none;
      cursor: pointer;
    }
    
    #sidebar a:hover {
      text-decoration: underline;
    }
  </style>
  <style id="rotation_css"></style>
</head>
<body>
  <script src="script.js"></script>
  <main><table id="display_table"></table></main> <!-- game board -->
  <div id="sidebar">
    <p>using ruleset <a id="ruleset_link" target="_blank"></a></p>
    <p id="current_turn_display"></p>
    <p><a onclick="window.location.href = (''+location).substring(0, (''+location).indexOf('?'));">Home</a></p>
  </div>
  <div id="menu">
    <div class="setup" onclick="link_to_rules('_standard.js')">
      <h2><span>l</span>Standard Game</h2>
      <p></p>
    </div>
    <div class="setup" onclick="link_to_rules('_960.js')">
      <h2><span>w</span>Fischer Random</h2>
      <p>The order of all pieces on the back rank is shuffled. Invented by Bobby Fischer in 1996.</p>
    </div>
    <h1>different board shapes</h1>
    <div class="setup" onclick="link_to_rules('_balbo.js')">
      <h2><span>v</span>Balbo's Game</h2>
      <p>A variant played on a non-rectangular board. Invented by M. Balbo in 1974.</p>
    </div>
    <div class="setup" onclick="link_to_rules('_mini.js')">
      <h2><span>o</span>Mini (4x4)</h2>
      <p>An absurdly tiny 4x4 game. //There are so few possibilities I could probably make a directed graph of literally every possible game</p>
    </div>
    <div class="setup" onclick="link_to_rules('_double.js')">
      <h2><span>m</span>Double (16x12)</h2>
      <p>An absurdly large 16x12 game. Each team has two kings, both of which must stay protected.</p>
    </div>
    <!--<h1>predecessors</h1>
    <div class="setup" onclick="">
      <h2><span>&nbsp;</span>Chaturanga</h2>
      <p>The ancient Indian predecessor of chess.</p>
    </div>
    <div class="setup" onclick="">
      <h2><span>&nbsp;</span>Shatranj</h2>
      <p>The ancient Iranian predecessor of chess.</p>
    </div>-->
    <h1>silly</h1>
    <div class="setup" onclick="link_to_rules('_puzzle.js')">
      <h2><span>x</span>Crossword</h2>
      <p></p>
    </div>
    <div class="setup" onclick="link_to_rules('_lol.js')">
      <h2><span>t</span>League of Legends</h2>
      <p></p>
    </div>
    <div class="setup" onclick="link_to_rules('_spacious.js')">
      <h2><span>w</span>Spacious Chess</h2>
      <p></p>
    </div>
    <div class="setup" onclick="link_to_rules('_checkers.js')">
      <h2><span>.</span>Checkers</h2>
      <p></p>
    </div>
  </div>
  <div id="modal" hidden="true"> <!-- modals that come up during PLAY --> </div>
  <script> <!-- game rule loader -->
    let filename = location.search;
    if (filename.startsWith("?")) filename = filename.substring(1);
    if (filename != "") {
      //make script
      let el = document.createElement("script");
      el.setAttribute("src", filename);
      el.setAttribute("type", "text/javascript");
      el.setAttribute("async", false);
      document.body.appendChild(el);
      el.addEventListener("load", function(){
        //success
      });
      el.addEventListener("error", function(er){
        //failure
      });
      //link to ruleset
      document.getElementById("ruleset_link").innerText = filename;
      document.getElementById("ruleset_link").setAttribute("href", filename);
      //menu
      document.getElementById("menu").remove();
    } else {
      //we are on home screen
      document.getElementById("sidebar").remove();
    }
    
    function link_to_rules(filename) {
      window.location.href = location + "?" + filename;
    }
  </script>
</body>
</html>