<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="icon.png">
  <title>Chess</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@600&display=swap');
    
    @font-face {
      font-family: "chess font";
      src: url('CASEFONT.TTF') format('truetype');
    }
    
    :root {
      --black: #292929;
      --white: #EDEDEA;
      --green: #32684B;
      --orange: #E08300;
    }
    
    body {
      user-select: none;
      margin: 0;
      background-color: var(--black);
      font-family: Inter, sans-serif;
      color: var(--white);
    }
    
    main {
      max-height: 94vh;
      overflow-y: scroll;
      margin-top: 3vh;
      position: absolute;
      width: 100%;
      top: 50%;
      transform: translateY(-50%) translateY(-3vh);
    }
    
    table {
      font-family: 'chess font';
      border-collapse: collapse;
      transition: transform 1s;
      margin: auto;
    }
    
    #display_table {
    }
    
    td {
      width: 5rem;
      height: 5rem;
      text-align: center;
      font-size: 4rem;
      background-color: var(--square);
    }
    
    td[parity="0"] {--square: var(--white); --not-square: var(--green);}
    td[parity="1"] {--square: var(--green); --not-square: var(--white);}
    
    span[team] {
      paint-order: stroke fill;
      -webkit-text-stroke: 0.5rem var(--black);
      display: block;
      transition: transform 0s;
    }
    
    span[team="0"] {color: var(--white);}
    span[team="1"] {color: var(--black); -webkit-text-stroke-color: var(--white);}
    span[team="2"] {color: #d22;}
    span[team="3"] {color: #22d;}
    span[team="4"] {color: #2d2;}
    
    td[oob="true"] {
      opacity: 0;
    }
    
    td[highlight="owned"] {
      cursor: pointer;
    }
    td[highlight="origin"] {
      background-color: var(--orange);
      cursor: pointer;
    }
    td[highlight="destination"] {
      cursor: pointer;
      box-shadow: inset 0.25rem 0.25rem var(--square), inset -0.25rem -0.25rem var(--square), inset 0.5rem 0.5rem var(--orange), inset -0.5rem -0.5rem var(--orange);
    }
    
    #menu {
      width: calc(100vw - 6rem);
      height: calc(100vh - 6rem);
      background-color: var(--green);
      font-size: 1.5rem;
      padding: 3rem;
      text-align: center;
      position: fixed;
    }
    
    #menu table {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    
    #menu tr[onclick] {
      cursor: pointer;
    }
    
    #menu td:nth-child(2) {
      width: 12rem;
      color: var(--white);
      font-family: 'Inter', sans-serif;
      font-size: 1.5rem;
      text-align: left;
      padding: 0.5rem 0.5rem;
    }
    
    #menu tr[onclick]:hover td:nth-child(2) {
      color: var(--orange);
      text-decoration: underline;
    }
    
    #menu tr[onclick]:hover td:nth-child(1) span {
      -webkit-text-stroke-color: var(--orange) !important;
    }
    
    #ruleset {
      position: fixed;
      bottom: 0;
      left: 0;
      padding: 1rem;
      background-color: var(--black);
      font-size: 1rem;
    }
    
    #ruleset a {
      color: var(--orange);
      text-decoration: none;
      cursor: pointer;
    }
    
    #ruleset a:hover {
      text-decoration: underline;
    }
    
    @keyframes modal_open {from {opacity: 0; transform: translate(-50%, -50%) translatey(2rem);}}
    @keyframes modal_close {to {opacity: 0; transform: translate(-50%, -50%) translatey(2rem);}}
    #modal {
      background-color: var(--black);
      border: solid 0.25rem var(--white);
      box-shadow: 0 0 1rem var(--black);
      width: 40rem;
      height: 20rem;
      left: 50%;
      top: 50%;
      position: absolute;
      transform: translate(-50%, -50%);
      padding: 3rem;
      user-select: text;
    }
    
    #modal p {
      margin: 1rem 0;
      font-size: 1.25rem;
    }
    
    #modal h1 {
      color: var(--orange);
      font-size: 2.25rem;
      margin: 1rem 0;
    }
    
    #close_modal {
      display: inline;
      height: 0;
      float: right;
      font-family: "chess font";
      font-size: 2rem;
      user-select: none;
      cursor: pointer;
    }
    
    #close_modal:hover {
      color: var(--orange);
    }
  </style>
  <style id="rotation_css"></style>
</head>
<body>
  <main><table id="display_table"></table></main> <!-- game board -->
  <div id="ruleset">using ruleset <a id="ruleset_link" target="_blank"></a><br><a onclick="window.location.href = (''+location).substring(0, (''+location).indexOf('?'));">Home</a></div> <!-- lil info -->
  <script id="rules_script"></script>
  <script src="script.js"></script>
  <div id="menu"> <!-- main menu -->
    <table>
      <tr onclick="link_to_rules('_standard.js')"><td parity="1"><span team="1">l</span></td><td>Standard Game</td></tr>
      <tr onclick="link_to_rules('_960.js')"><td parity="1"><span team="1">t</span></td><td>Chess960</td></tr>
      <tr onclick="link_to_rules('_balbo.js')"><td parity="1"><span team="1">v</span></td><td>Balbo's Game</td></tr>
      <tr onclick="link_to_rules('_mini.js')"><td parity="1"><span team="1">o</span></td><td>Mini (4x4)</td></tr>
      <tr onclick="link_to_rules('_double.js')"><td parity="1"><span team="1">m</span></td><td>Double (16x12)</td></tr>
      <tr onclick="link_to_rules('_lol.js')"><td parity="1"><span team="1">w</span></td><td>league of legends</td></tr>
      <!--<tr><td parity="1"><span team="1">w</span></td><td>Make board...</td></tr>
      <tr><td parity="1"><span team="1">m</span></td><td>Other variants...</td></tr>-->
    </table>
  </div>
  <div id="modal" hidden="true"> <!-- modals that come up during PLAY --> </div>
  <script> <!-- game rule loader -->
    let filename = location.search;
    if (filename.startsWith("?")) filename = filename.substring(1);
    if (filename != "") {
      document.getElementById("rules_script").setAttribute("src", filename);
      document.getElementById("ruleset_link").innerText = filename;
      document.getElementById("ruleset_link").setAttribute("href", filename);
    }
    
    function link_to_rules(filename) {
      window.location.href = location + "?" + filename;
    }
  </script>
</body>
</html>