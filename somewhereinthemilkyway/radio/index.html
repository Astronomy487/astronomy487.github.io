<!DOCTYPE html>
<html>
<head>
  <link rel="icon" href="" id="favicon">
  <title id="title">somewhere in the milky way radio</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&display=swap');
    
    #body {
      background-image: url("https://cdn.discordapp.com/attachments/958860935232106529/1009279879327527103/photo1.jpg");
      background-repeat: no-repeat;
      background-size: cover;
      background-width: 100vw;
      margin: 0;
      overflow: hidden;
      animation: bganimation 200s infinite;
    }
    
    ::selection {
      background: white;
      color: black;
    }
    
    @keyframes bganimation {
      from {
        background-position-y: 0;
      }
      50% {
        background-position-y: calc(100% + 100vh);
      }
      to {
        background-position-y: 0;
      }
    }
    
    #bg-cover {
      position: fixed;
      padding: 0;
      margin: 0;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0008;
    }
    
    #info {
      width: 48rem;
      height: 32rem;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      margin: 0;
      font-family: "Noto Serif SC", serif;
    }
    
    #photo {
      width: 24rem;
      height: 24rem;
      margin: auto;
      display: block;
      border-radius: 0.5rem;
    }
    
    #name {
      color: white;
      text-transform: uppercase;
      text-align: center;
      margin-top: 5rem;
      font-size: 1.25rem;
    }
  </style>
</head>
<body id="body" onclick="startSession()">
  <div id="bg-cover">
    <div id="info">
      <img id="photo" src="https://cdn.discordapp.com/attachments/958860935232106529/1009287821028249670/SOMEWHERE_IN_THE_MILKY_WAY.jpg">
      <div id="name">press anywhere to start</div>
    </div>
  </div>
  <script>
    let now = new Date();
    let offsets = [0,1,0,-1,0,1,-1,1,-1,0,-1,0];
    //using discord again to host files. like a boss!!!
    //if you're looking at this to see the songs early you have major loser syndrome
    let audioURL = {
      normal1: "https://cdn.discordapp.com/attachments/958860935232106529/1009267628377899128/Astro_-_somewhere_in_the_milky_way_-_01_daybreak.mp3",
      normal2: "https://cdn.discordapp.com/attachments/958860935232106529/1009267628663132221/Astro_-_somewhere_in_the_milky_way_-_02_morning_star.mp3",
      normal3: "https://cdn.discordapp.com/attachments/958860935232106529/1009267628969312316/Astro_-_somewhere_in_the_milky_way_-_03_crossing_guard.mp3",
      normal4: "https://cdn.discordapp.com/attachments/958860935232106529/1009267629271285800/Astro_-_somewhere_in_the_milky_way_-_04_windmills.mp3",
      normal5: "https://cdn.discordapp.com/attachments/958860935232106529/1009267629590057040/Astro_-_somewhere_in_the_milky_way_-_05_rings.mp3",
      normal6: "https://cdn.discordapp.com/attachments/958860935232106529/1009267629883670558/Astro_-_somewhere_in_the_milky_way_-_06_overcast.mp3",
      normal7: "https://cdn.discordapp.com/attachments/958860935232106529/1009267630185656391/Astro_-_somewhere_in_the_milky_way_-_07_pink_lemonade.mp3",
      normal8: "https://cdn.discordapp.com/attachments/958860935232106529/1009267627467747328/Astro_-_somewhere_in_the_milky_way_-_08_golden.mp3",
      normal9: "https://cdn.discordapp.com/attachments/958860935232106529/1009267627790717028/Astro_-_somewhere_in_the_milky_way_-_09_clear_sky.mp3",
      normal10: "https://cdn.discordapp.com/attachments/958860935232106529/1009267628071731260/Astro_-_somewhere_in_the_milky_way_-_10_rainfall.mp3",
      normal11: "https://cdn.discordapp.com/attachments/958860935232106529/1009267673550565507/Astro_-_somewhere_in_the_milky_way_-_11_forget_everything.mp3",
      normal12: "https://cdn.discordapp.com/attachments/958860935232106529/1009267674393628702/Astro_-_somewhere_in_the_milky_way_-_12_current.mp3",
      normal13: "https://cdn.discordapp.com/attachments/958860935232106529/1009267674678820904/Astro_-_somewhere_in_the_milky_way_-_13_in_twilight.mp3",
      normal14: "https://cdn.discordapp.com/attachments/958860935232106529/1009267675018563734/Astro_-_somewhere_in_the_milky_way_-_14_glisten.mp3",
      normal15: "https://cdn.discordapp.com/attachments/958860935232106529/1009267652084121640/Astro_-_somewhere_in_the_milky_way_-_15_hidden_beneath_the_covers.mp3",
      normal16: "https://cdn.discordapp.com/attachments/958860935232106529/1009267652402884648/Astro_-_somewhere_in_the_milky_way_-_16_right_here.mp3",
      normal17: "https://cdn.discordapp.com/attachments/958860935232106529/1009267652721659914/Astro_-_somewhere_in_the_milky_way_-_17_it_is_so_nice_out.mp3",
      normal18: "https://cdn.discordapp.com/attachments/958860935232106529/1009267653019451555/Astro_-_somewhere_in_the_milky_way_-_18_campfires.mp3",
      normal19: "https://cdn.discordapp.com/attachments/958860935232106529/1009267653346603138/Astro_-_somewhere_in_the_milky_way_-_19_wide_awake_dreaming_of_some_place_far_away.mp3",
      normal20: "https://cdn.discordapp.com/attachments/958860935232106529/1009267653686349824/Astro_-_somewhere_in_the_milky_way_-_20_graveyard.mp3",
      normal21: "https://cdn.discordapp.com/attachments/958860935232106529/1009267663316467833/Astro_-_somewhere_in_the_milky_way_-_21_wonder.mp3",
      normal22: "https://cdn.discordapp.com/attachments/958860935232106529/1009267663740080188/Astro_-_somewhere_in_the_milky_way_-_22_shimmering.mp3",
      normal23: "https://cdn.discordapp.com/attachments/958860935232106529/1009267664050462780/Astro_-_somewhere_in_the_milky_way_-_23_meteor_shower.mp3",
      normal24: "https://cdn.discordapp.com/attachments/958860935232106529/1009267660816666644/Astro_-_somewhere_in_the_milky_way_-_24_secrets.mp3",
      snowdrift1: "https://cdn.discordapp.com/attachments/958860935232106529/1009267661160587425/Astro_-_somewhere_in_the_milky_way_-_25_daybreak_snowdrift.mp3",
      snowdrift2: "https://cdn.discordapp.com/attachments/958860935232106529/1009267661529698444/Astro_-_somewhere_in_the_milky_way_-_26_morning_star_snowdrift.mp3",
      snowdrift3: "https://cdn.discordapp.com/attachments/958860935232106529/1009267661802315797/Astro_-_somewhere_in_the_milky_way_-_27_crossing_guard_snowdrift.mp3",
      snowdrift4: "https://cdn.discordapp.com/attachments/958860935232106529/1009267662154641553/Astro_-_somewhere_in_the_milky_way_-_28_windmills_snowdrift.mp3",
      snowdrift5: "https://cdn.discordapp.com/attachments/958860935232106529/1009267662536314970/Astro_-_somewhere_in_the_milky_way_-_29_rings_snowdrift.mp3",
      snowdrift6: "https://cdn.discordapp.com/attachments/958860935232106529/1009267662871863296/Astro_-_somewhere_in_the_milky_way_-_30_overcast_snowdrift.mp3",
      snowdrift7: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658010660904/Astro_-_somewhere_in_the_milky_way_-_31_pink_lemonade_snowdrift.mp3",
      snowdrift8: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658350395553/Astro_-_somewhere_in_the_milky_way_-_32_golden_snowdrift.mp3",
      snowdrift9: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658664988702/Astro_-_somewhere_in_the_milky_way_-_33_clear_sky_snowdrift.mp3",
      snowdrift10: "https://cdn.discordapp.com/attachments/958860935232106529/1009267659042467930/Astro_-_somewhere_in_the_milky_way_-_34_rainfall_snowdrift.mp3",
      snowdrift11: "https://cdn.discordapp.com/attachments/958860935232106529/1009267656135807117/Astro_-_somewhere_in_the_milky_way_-_35_forget_everything_snowdrift.mp3",
      snowdrift12: "https://cdn.discordapp.com/attachments/958860935232106529/1009267656450383983/Astro_-_somewhere_in_the_milky_way_-_36_current_snowdrift.mp3",
      snowdrift13: "https://cdn.discordapp.com/attachments/958860935232106529/1009267656735604856/Astro_-_somewhere_in_the_milky_way_-_37_in_twilight_snowdrift.mp3",
      snowdrift14: "https://cdn.discordapp.com/attachments/958860935232106529/1009267657045971014/Astro_-_somewhere_in_the_milky_way_-_38_glisten_snowdrift.mp3",
      snowdrift15: "https://cdn.discordapp.com/attachments/958860935232106529/1009267657368928256/Astro_-_somewhere_in_the_milky_way_-_39_hidden_beneath_the_covers_snowdrift.mp3",
      snowdrift16: "https://cdn.discordapp.com/attachments/958860935232106529/1009267657712877700/Astro_-_somewhere_in_the_milky_way_-_40_right_here_snowdrift.mp3",
      snowdrift17: "https://cdn.discordapp.com/attachments/958860935232106529/1009267659474473001/Astro_-_somewhere_in_the_milky_way_-_41_it_is_so_nice_out_snowdrift.mp3",
      snowdrift18: "https://cdn.discordapp.com/attachments/958860935232106529/1009267659751292938/Astro_-_somewhere_in_the_milky_way_-_42_campfires_snowdrift.mp3",
      snowdrift19: "https://cdn.discordapp.com/attachments/958860935232106529/1009267660233654393/Astro_-_somewhere_in_the_milky_way_-_43_wide_awake_dreaming_of_some_place_far_away_snowdrift.mp3",
      snowdrift20: "https://cdn.discordapp.com/attachments/958860935232106529/1009267657830301746/Astro_-_somewhere_in_the_milky_way_-_44_graveyard_snowdrift.mp3",
      snowdrift21: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658161660024/Astro_-_somewhere_in_the_milky_way_-_45_wonder_snowdrift.mp3",
      snowdrift22: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658472046662/Astro_-_somewhere_in_the_milky_way_-_46_shimmering_snowdrift.mp3",
      snowdrift23: "https://cdn.discordapp.com/attachments/958860935232106529/1009267658904043663/Astro_-_somewhere_in_the_milky_way_-_47_meteor_shower_snowdrift.mp3",
      snowdrift24: "https://cdn.discordapp.com/attachments/958860935232106529/1009267659197665351/Astro_-_somewhere_in_the_milky_way_-_48_secrets_snowdrift.mp3"
    };
    let titles = {
      normal1: "daybreak",
      normal2: "morning star",
      normal3: "crossing guard",
      normal4: "windmills",
      normal5: "rings",
      normal6: "overcast",
      normal7: "pink lemonade",
      normal8: "golden",
      normal9: "clear sky",
      normal10: "rainfall",
      normal11: "forget everything",
      normal12: "current",
      normal13: "in twilight",
      normal14: "glisten",
      normal15: "hidden beneath the covers",
      normal16: "right here",
      normal17: "it is so nice out",
      normal18: "campfires",
      normal19: "wide awake, dreaming of some place far away",
      normal20: "graveyard",
      normal21: "wonder",
      normal22: "shimmering",
      normal23: "meteor shower",
      normal24: "secrets",
      snowdrift1: "daybreak (snowdrift)",
      snowdrift2: "morning star (snowdrift)",
      snowdrift3: "crossing guard (snowdrift)",
      snowdrift4: "windmills (snowdrift)",
      snowdrift5: "rings (snowdrift)",
      snowdrift6: "overcast (snowdrift)",
      snowdrift7: "pink lemonade (snowdrift)",
      snowdrift8: "golden (snowdrift)",
      snowdrift9: "clear sky (snowdrift)",
      snowdrift10: "rainfall (snowdrift)",
      snowdrift11: "forget everything (snowdrift)",
      snowdrift12: "current (snowdrift)",
      snowdrift13: "in twilight (snowdrift)",
      snowdrift14: "glisten (snowdrift)",
      snowdrift15: "hidden beneath the covers (snowdrift)",
      snowdrift16: "right here (snowdrift)",
      snowdrift17: "it is so nice out (snowdrift)",
      snowdrift18: "campfires (snowdrift)",
      snowdrift19: "wide awake, dreaming of some place far away (snowdrift)",
      snowdrift20: "graveyard (snowdrift)",
      snowdrift21: "wonder (snowdrift)",
      snowdrift22: "shimmering (snowdrift)",
      snowdrift23: "meteor shower (snowdrift)",
      snowdrift24: "secrets (snowdrift)"
    };
    let loaded = 0;
    let audio = {};
    let started = false;
    function startSession() {
      if (started) return;
      started = true;
      for (songname of Object.keys(audioURL)) {
        audio[songname] = new Audio(audioURL[songname]);
        audio[songname].addEventListener("canplay", justLoaded(songname));
        //i had some problems here where, once the event listener triggered, songname was whatever was last in the loop
        //but it magically went away. miracles are real
      }
    }
    
    function justLoaded(songname) {
      loaded++;
      //console.log(songname);
      //console.log(songrn(0));
      if (songname == songrn(0)) {
        //console.log("listen up folks!!! time to play this song that just loaded");
        now = new Date();
        let howFar = now.getMinutes()*60%300+now.getSeconds()+now.getMilliseconds()/1000; //this is how far into current play we gotta be
        audio[songname].currentTime = howFar;
        //console.log(howFar);
        //console.log(audio[songname].currentTime);
        audio[songname].play();
        waitAndPlay();
        display(songname);
      }
    }
    
    function waitAndPlay() {
      now = new Date();
      let longer = 5 - (now.getMinutes()+now.getSeconds()/60+now.getMilliseconds()/60000)%5; //how much longer until next 5 minutes, measured in minutes
      //console.log("checking. we need "+longer);
      setTimeout(function(){
        //console.log("boom done waiting. lets now play song "+songrn(1));
        audio[songrn(1)].play();
        audio[songrn(-1)].pause();
        display(songrn(1));
        setTimeout(function(){
          waitAndPlay(); //start next round after 2 seconds. just in case we technically have like 0.0001 seconds left
        },2000);
      }, longer*60000);
      return; //end wait. does this prevent infinite recursion evil monster? who knows
    }
    
    function songrn(extra) { //returns string like "normal1" or "snowdrift15"
      now = new Date();
      let hour = Math.floor(now.getHours()+now.getMinutes()/60+now.getSeconds()/3600+now.getMilliseconds()/3600000+extra/60); //hour of now + extra time
      let offsetNumber = Math.floor((now.getMinutes()+extra)%60/5)%12; //offset, given current minutes
      let n = (hour + 18 + offsets[offsetNumber])%24+1;
      //console.log("in "+extra+" minutes it'll be hour "+hour+" on offset "+offsetNumber);
      let mode = now.getMonth() <= 2 || now.getMonth() == 12 ? "snowdrift" : "normal";
      return mode+n;
    }
    
    //document.getElementById("body").style.background = "url('https://cdn.discordapp.com/attachments/958860935232106529/1009279879327527103/photo1.jpg')";
    function display(song) {
      let snowdrift = song.includes("snow");
      let n = song.replace(/\D/g, "");
      let disc = Math.floor((n-1)/6)+1;
      let bgurl = ["https://cdn.discordapp.com/attachments/958860935232106529/1009296722255691787/photo1.jpg", "https://cdn.discordapp.com/attachments/958860935232106529/1009296722595414026/photo2.jpg", "https://cdn.discordapp.com/attachments/958860935232106529/1009296722901602364/photo3.jpg", "https://cdn.discordapp.com/attachments/958860935232106529/1009296723287486624/photo4.jpg"][disc-1];
      if (snowdrift) bgurl = "https://cdn.discordapp.com/attachments/958860935232106529/1009296723706925116/photo5.jpg";
      document.getElementById("photo").src = bgurl;
      document.getElementById("body").style.backgroundImage = "url('"+bgurl+"')";
      document.getElementById("name").innerText = titles[song];
      document.getElementById("favicon").href = bgurl;
      document.getElementById("title").innerHTML = "Astro - "+titles[song]
      //console.log("disc "+disc);
    }
    
    //check for mobile bc vertical bg scrolling is weird.
    //only checks on page load. if u change viewport size AS page is loaded, it messes up
    //but that only happens if ur playing with stuff so whatevs
    if (window.innerHeight > window.innerWidth) {
      console.log("vertical");
      document.getElementById("body").style.animation = "none";
      document.getElementById("body").style.backgroundSize = "100vh 100vh";
      document.getElementById("body").style.backgroundPositionX = "center";
    }
  </script>
</body>
</html>